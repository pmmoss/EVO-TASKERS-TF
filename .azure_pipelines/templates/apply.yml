parameters:
  - name: environment
    type: string
  - name: workingDirectory
    type: string

steps:
  - script: |
      terraform workspace select ${{ parameters.environment }}
      terraform apply -var-file="${{ parameters.environment }}.tfvars" -auto-approve
    workingDirectory: ${{ parameters.workingDirectory }}
    displayName: 'Terraform Apply'
