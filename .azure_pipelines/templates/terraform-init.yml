parameters:
  - name: environment
    type: string
  - name: workingDirectory
    type: string
  - name: AzureRM-Connection
    type: string
    default: 'EVO-Taskers-Sandbox'

variables:
  - group: 'terraform-backend'
steps:
  - task: TerraformTaskV4@4
  displayName: Initialize Terraform
  workingDirectory: ${{parameters.workingDirectory}}
  inputs:
    provider: 'azurerm'
    command: 'init'
    backendServiceArm: ${{parameters.AzureRM-Connection}}
    backendAzureRmResourceGroupName: ${{variables.BACKEND_RESOURCE_GROUP_NAME}}
    backendAzureRmStorageAccountName: ${{variables.BACKEND_STORAGE_ACCOUNT_NAME}}
    backendAzureRmContainerName: ${{variables.BACKEND_CONTAINER_NAME}}
    backendAzureRmKey: ${{variables.BACKEND_CONTAINER_NAME}}